#!/bin/bash
# shellcheck disable=SC2153

# KeePassXC escala el tama침o del cursos incorrectamente, este script trata de
# corregir dicho comportamiento reduciendo el tama침o del cursor en funci칩n del
# factor de escalado del monitor.

# Calculamos el tama침o del cursor necesario
ACTIVE_MONITOR=$(hyprctl monitors -j | jq '.[] | select(.focused == true)')
SCALE=$(echo "$ACTIVE_MONITOR" | jq -r '.scale')
SCALE=$(echo "scale=0; (2*$SCALE + 0.5)/1 / 2" | bc) # Aproximamos a un multipo de 0.5
CURSOR_SIZE=$(echo "($XCURSOR_SIZE / $SCALE + 0.5)/1" | bc)

# Iniciamos keepassxc
XCURSOR_SIZE=$CURSOR_SIZE /usr/bin/keepassxc

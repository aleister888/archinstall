#!/bin/sh -x
# shellcheck disable=SC1091

TIMEOUT_SCREEN=120
TIMEOUT_LOCK=60

. "$HOME/.dotfiles/assets/shell/shell-utils-sh"

if pgrep -f --quiet swayidle; then
	pkill swayidle
else
	setsid -f swayidle -w timeout "$TIMEOUT_SCREEN" \
		'hyprctl dispatch dpms off' resume 'hyprctl dispatch dpms on' >/dev/null 2>&1

	setsid -f swayidle -w timeout "$TIMEOUT_LOCK" 'hyprlock' >/dev/null 2>&1
fi

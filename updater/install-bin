#!/bin/bash

# Script que crea enlaces simbólicos en /usr/local/bin para ciertos scripts
# - Invocado por /update.sh

[ "$(id -u)" -eq 0 ] && exit 1

DEBUG=false

# Comprobamos si el script se ejecutó en modo debug
while getopts "d" opt; do
	case $opt in
	d) DEBUG=true ;;
	*) ;;
	esac
done

# Si está en modo debug, activamos xtrace
if [ "$DEBUG" = true ]; then
	set -x
fi

FILES=(
	"cleanup-old-modules"
	"rdp-connect"
	"wakeat"
	"wakeme"
)
for FILE in "${FILES[@]}"; do
	[ -e "/usr/local/bin/$FILE" ] && sudo /usr/bin/rm /usr/local/bin/"$FILE"
	sudo /usr/bin/install -o root -g root -m 0755 "$HOME/.dotfiles/assets/bin/$FILE" "/usr/local/bin/$FILE"
done
